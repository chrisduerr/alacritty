language: rust

sudo: required
services:
  - docker

git:
  depth: 1

os:
  - linux
  - osx
  - windows

rust:
  - stable
  - nightly

matrix:
  fast_finish: true
  allow_failures:
    - rust: nightly
    - os: windows

install: ci/install.sh
script: ci/script.sh
before_deploy: ci/before_deploy.sh

deploy:
  provider: releases
  api_key:
    secure: bdVg6jYkLat9Rgs4zF1rANdWictBCiZyUn8MVYW8FeST17+xRJVjpAy+kAxSZ32QxMtgAJyKxg57EWSEo5DBhSgeAa1bRgSljrCYVCtE2VW8M2YuOaw2jjRiuEPo5xBiTHovnLvH6qTqBs4SvbqSsMVaPi2TzjtB4zfRDQ5lVpZD7nujP9QWAMO2125a2Min/zQMV99xzWGjrcxxvtLAtnOlAM5cfCqPrAQQE3mXi68D5XgG+dbrqZ4fGCs7j5tor9h3pnTurLdGV+ezcZMo+QEoLoF4QZHSsoNMLbIiG83q8IY5lnwjUFlXPJ6ZzD5pukTDSwSeuXGoJgLzg/eUT6iyT/rW/0kaom9lwj81nkho80sY0TQd3uWhnlVcsl2+oujkH94kq4dvp6qwLgED/DU/LGzImaJCqsvLp45xgrLET0uQXB62+uIK8egTD8H90XA9015FzpLFhXyvSD0uQfRrM5B0brc+vHa3I991r9/RlptxtFN7daS2HMoi1XMTjQBTWlCF5nDPbK1xp0jontfm+PowkqhFVleDsVeMm/omF/e5DlIoIUepcAn6Py3E/sHhz7i4JZfp+Xw78KXFiLweRvP93O4ko0AOVgZG0xpo4aVCMREYNIQl3uDe5js7gKi1Fd6KgSwumGs44EYfh/U8o0rJRvNse23WJ/t/a0Q=
  skip_cleanup: true
  file_glob: true
  file: "./target/deploy/*"
  on:
    tags: true
    rust: stable
    repo: chrisduerr/alacritty
